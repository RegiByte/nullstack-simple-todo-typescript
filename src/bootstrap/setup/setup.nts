import {kIoc} from "../../constants/ioc";
import {NullstackIocApp} from "../internals/IocApp.nts";
import {setupContainers} from "./setupContainers.nts";
import {initializeProviders} from "./initializeProviders.nts";

export function setupApp({mainIoc = kIoc.SERVER}): NullstackIocApp {
	const {mainContainer, iocContainers} = setupContainers({mainIoc})

	initializeProviders(mainContainer, iocContainers)

	return {
		mainContainer,
		iocContainers
	}
}
